### ğŸ“º è§†é¢‘é¢˜è§£  
 [41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°.mp4](cac80bf0-8440-4325-94bb-b9f729db7dde)

### ğŸ“– æ–‡å­—é¢˜è§£
#### å‰è¨€

å¦‚æœæœ¬é¢˜æ²¡æœ‰é¢å¤–çš„æ—¶ç©ºå¤æ‚åº¦è¦æ±‚ï¼Œé‚£ä¹ˆå°±å¾ˆå®¹æ˜“å®ç°ï¼š

- æˆ‘ä»¬å¯ä»¥å°†æ•°ç»„æ‰€æœ‰çš„æ•°æ”¾å…¥å“ˆå¸Œè¡¨ï¼Œéšåä» *1* å¼€å§‹ä¾æ¬¡æšä¸¾æ­£æ•´æ•°ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ï¼›

- æˆ‘ä»¬å¯ä»¥ä» *1* å¼€å§‹ä¾æ¬¡æšä¸¾æ­£æ•´æ•°ï¼Œå¹¶éå†æ•°ç»„ï¼Œåˆ¤æ–­å…¶æ˜¯å¦åœ¨æ•°ç»„ä¸­ã€‚

å¦‚æœæ•°ç»„çš„é•¿åº¦ä¸º *N*ï¼Œé‚£ä¹ˆç¬¬ä¸€ç§åšæ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º *O(N)*ï¼Œç©ºé—´å¤æ‚åº¦ä¸º *O(N)*ï¼›ç¬¬äºŒç§åšæ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º *O(N^2)*ï¼Œç©ºé—´å¤æ‚åº¦ä¸º *O(1)*ã€‚ä½†å®ƒä»¬éƒ½ä¸æ»¡è¶³æ—¶é—´å¤æ‚åº¦ä¸º *O(N)* ä¸”ç©ºé—´å¤æ‚åº¦ä¸º *O(1)*ã€‚

ã€ŒçœŸæ­£ã€æ»¡è¶³æ—¶é—´å¤æ‚åº¦ä¸º *O(N)* ä¸”ç©ºé—´å¤æ‚åº¦ä¸º *O(1)* çš„ç®—æ³•æ˜¯ä¸å­˜åœ¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ï¼šåˆ©ç”¨ç»™å®šæ•°ç»„ä¸­çš„ç©ºé—´æ¥å­˜å‚¨ä¸€äº›çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé¢˜ç›®ç»™å®šçš„æ•°ç»„æ˜¯**ä¸å¯ä¿®æ”¹**çš„ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨æ»¡è¶³æ—¶ç©ºå¤æ‚åº¦è¦æ±‚çš„ç®—æ³•ï¼›ä½†å¦‚æœæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç»™å®šçš„æ•°ç»„ï¼Œé‚£ä¹ˆæ˜¯å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç®—æ³•çš„ã€‚

#### æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨

å¯¹äºã€Œå‰è¨€ã€ä¸­æåˆ°çš„ç¬¬ä¸€ç§åšæ³•ï¼š

> æˆ‘ä»¬å¯ä»¥å°†æ•°ç»„æ‰€æœ‰çš„æ•°æ”¾å…¥å“ˆå¸Œè¡¨ï¼Œéšåä» *1* å¼€å§‹ä¾æ¬¡æšä¸¾æ­£æ•´æ•°ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚

ä»”ç»†æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Ÿè¿™æ˜¯å› ä¸ºå“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªå¯ä»¥æ”¯æŒå¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„ï¼šç»™å®šä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ *O(1)* çš„æ—¶é—´æŸ¥æ‰¾è¯¥å…ƒç´ æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†ç»™å®šçš„æ•°ç»„è®¾è®¡æˆå“ˆå¸Œè¡¨çš„ã€Œæ›¿ä»£äº§å“ã€ã€‚

å®é™…ä¸Šï¼Œå¯¹äºä¸€ä¸ªé•¿åº¦ä¸º *N* çš„æ•°ç»„ï¼Œå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°æ­£æ•´æ•°åªèƒ½åœ¨ *[1, N+1]* ä¸­ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœ *[1, N]* éƒ½å‡ºç°äº†ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯ *N+1*ï¼Œå¦åˆ™ç­”æ¡ˆæ˜¯ *[1, N]* ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°æ­£æ•´æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼Œ**æˆ‘ä»¬å°†æ‰€æœ‰åœ¨ *[1, N]*** èŒƒå›´å†…çš„æ•°æ”¾å…¥å“ˆå¸Œè¡¨ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ç­”æ¡ˆã€‚è€Œç»™å®šçš„æ•°ç»„æ°å¥½é•¿åº¦ä¸º *N*ï¼Œè¿™è®©æˆ‘ä»¬æœ‰äº†ä¸€ç§å°†æ•°ç»„è®¾è®¡æˆå“ˆå¸Œè¡¨çš„æ€è·¯ï¼š

> æˆ‘ä»¬å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œå¯¹äºéå†åˆ°çš„æ•° *x*ï¼Œå¦‚æœå®ƒåœ¨ *[1, N]* çš„èŒƒå›´å†…ï¼Œé‚£ä¹ˆå°±å°†æ•°ç»„ä¸­çš„ç¬¬ *x-1* ä¸ªä½ç½®ï¼ˆæ³¨æ„ï¼šæ•°ç»„ä¸‹æ ‡ä» *0* å¼€å§‹ï¼‰æ‰“ä¸Šã€Œæ ‡è®°ã€ã€‚åœ¨éå†ç»“æŸä¹‹åï¼Œå¦‚æœæ‰€æœ‰çš„ä½ç½®éƒ½è¢«æ‰“ä¸Šäº†æ ‡è®°ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯ *N+1*ï¼Œå¦åˆ™ç­”æ¡ˆæ˜¯æœ€å°çš„æ²¡æœ‰æ‰“ä¸Šæ ‡è®°çš„ä½ç½®åŠ  *1*ã€‚

é‚£ä¹ˆå¦‚ä½•è®¾è®¡è¿™ä¸ªã€Œæ ‡è®°ã€å‘¢ï¼Ÿç”±äºæ•°ç»„ä¸­çš„æ•°æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå› æ­¤è¿™å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚ä½†æˆ‘ä»¬å¯ä»¥ç»§ç»­åˆ©ç”¨ä¸Šé¢çš„æåˆ°çš„æ€§è´¨ï¼šç”±äºæˆ‘ä»¬åªåœ¨æ„ *[1, N]* ä¸­çš„æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å…ˆå¯¹æ•°ç»„è¿›è¡Œéå†ï¼ŒæŠŠä¸åœ¨ *[1, N]* èŒƒå›´å†…çš„æ•°ä¿®æ”¹æˆä»»æ„ä¸€ä¸ªå¤§äº *N* çš„æ•°ï¼ˆä¾‹å¦‚ *N+1*ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œ**æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å°±éƒ½æ˜¯æ­£æ•°äº†**ï¼Œå› æ­¤æˆ‘ä»¬å°±å¯ä»¥å°†ã€Œæ ‡è®°ã€è¡¨ç¤ºä¸ºã€Œè´Ÿå·ã€ã€‚ç®—æ³•çš„æµç¨‹å¦‚ä¸‹ï¼š

- æˆ‘ä»¬å°†æ•°ç»„ä¸­æ‰€æœ‰å°äºç­‰äº *0* çš„æ•°ä¿®æ”¹ä¸º *N+1*ï¼›

- æˆ‘ä»¬éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•° *x*ï¼Œå®ƒå¯èƒ½å·²ç»è¢«æ‰“äº†æ ‡è®°ï¼Œå› æ­¤åŸæœ¬å¯¹åº”çš„æ•°ä¸º *|x|*ï¼Œå…¶ä¸­ ![|\,| ](./p__|,|_.png)  ä¸ºç»å¯¹å€¼ç¬¦å·ã€‚å¦‚æœ ![|x|\in\[1,N\] ](./p__|x|_in__1,_N__.png) ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»™æ•°ç»„ä¸­çš„ç¬¬ *|x| - 1* ä¸ªä½ç½®çš„æ•°æ·»åŠ ä¸€ä¸ªè´Ÿå·ã€‚æ³¨æ„å¦‚æœå®ƒå·²ç»æœ‰è´Ÿå·ï¼Œä¸éœ€è¦é‡å¤æ·»åŠ ï¼›

- åœ¨éå†å®Œæˆä¹‹åï¼Œå¦‚æœæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯ *N+1*ï¼Œå¦åˆ™ç­”æ¡ˆæ˜¯ç¬¬ä¸€ä¸ªæ­£æ•°çš„ä½ç½®åŠ  *1*ã€‚

 [fig1](https://assets.leetcode-cn.com/solution-static/41/41_fig1.png)

```C++ [sol1-C++]
class Solution {
public:
    int firstMissingPositive(vector<int>& nums) {
        int n = nums.size();
        for (int& num: nums) {
            if (num <= 0) {
                num = n + 1;
            }
        }
        for (int i = 0; i < n; ++i) {
            int num = abs(nums[i]);
            if (num <= n) {
                nums[num - 1] = -abs(nums[num - 1]);
            }
        }
        for (int i = 0; i < n; ++i) {
            if (nums[i] > 0) {
                return i + 1;
            }
        }
        return n + 1;
    }
};
```

```Java [sol1-Java]
class Solution {
    public int firstMissingPositive(int[] nums) {
        int n = nums.length;
        for (int i = 0; i < n; ++i) {
            if (nums[i] <= 0) {
                nums[i] = n + 1;
            }
        }
        for (int i = 0; i < n; ++i) {
            int num = Math.abs(nums[i]);
            if (num <= n) {
                nums[num - 1] = -Math.abs(nums[num - 1]);
            }
        }
        for (int i = 0; i < n; ++i) {
            if (nums[i] > 0) {
                return i + 1;
            }
        }
        return n + 1;
    }
}
```

```Python [sol1-Python3]
class Solution:
    def firstMissingPositive(self, nums: List[int]) -> int:
        n = len(nums)
        for i in range(n):
            if nums[i] <= 0:
                nums[i] = n + 1
        
        for i in range(n):
            num = abs(nums[i])
            if num <= n:
                nums[num - 1] = -abs(nums[num - 1])
        
        for i in range(n):
            if nums[i] > 0:
                return i + 1
        
        return n + 1
```

```C [sol1-C]
int firstMissingPositive(int* nums, int numsSize) {
    for (int i = 0; i < numsSize; ++i) {
        if (nums[i] <= 0) {
            nums[i] = numsSize + 1;
        }
    }
    for (int i = 0; i < numsSize; ++i) {
        int num = abs(nums[i]);
        if (num <= numsSize) {
            nums[num - 1] = -abs(nums[num - 1]);
        }
    }
    for (int i = 0; i < numsSize; ++i) {
        if (nums[i] > 0) {
            return i + 1;
        }
    }
    return numsSize + 1;
}
```

```golang [sol1-Golang]
func firstMissingPositive(nums []int) int {
    n := len(nums)
    for i := 0; i < n; i++ {
        if nums[i] <= 0 {
            nums[i] = n + 1
        }
    }
    for i := 0; i < n; i++ {
        num := abs(nums[i])
        if num <= n {
            fmt.Println(num-1)
            nums[num - 1] = -abs(nums[num - 1])
        }
    }
    for i := 0; i < n; i++ {
        if nums[i] > 0 {
            return i + 1
        }
    }
    return n + 1
}

func abs(x int) int {
    if x < 0 {
        return -x
    }
    return x
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š*O(N)*ï¼Œå…¶ä¸­ *N* æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š*O(1)*ã€‚

#### æ–¹æ³•äºŒï¼šç½®æ¢

é™¤äº†æ‰“æ ‡è®°ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç½®æ¢çš„æ–¹æ³•ï¼Œå°†ç»™å®šçš„æ•°ç»„ã€Œæ¢å¤ã€æˆä¸‹é¢çš„å½¢å¼ï¼š

> å¦‚æœæ•°ç»„ä¸­åŒ…å« ![x\in\[1,N\] ](./p__x_in__1,_N__.png) ï¼Œé‚£ä¹ˆæ¢å¤åï¼Œæ•°ç»„çš„ç¬¬ *x - 1* ä¸ªå…ƒç´ ä¸º *x*ã€‚

åœ¨æ¢å¤åï¼Œæ•°ç»„åº”å½“æœ‰ `[1, 2, ..., N]` çš„å½¢å¼ï¼Œä½†å…¶ä¸­æœ‰è‹¥å¹²ä¸ªä½ç½®ä¸Šçš„æ•°æ˜¯é”™è¯¯çš„ï¼Œæ¯ä¸€ä¸ªé”™è¯¯çš„ä½ç½®å°±ä»£è¡¨äº†ä¸€ä¸ªç¼ºå¤±çš„æ­£æ•°ã€‚ä»¥é¢˜ç›®ä¸­çš„ç¤ºä¾‹äºŒ `[3, 4, -1, 1]` ä¸ºä¾‹ï¼Œæ¢å¤åçš„æ•°ç»„åº”å½“ä¸º `[1, -1, 3, 4]`ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ç¼ºå¤±çš„æ•°ä¸º *2*ã€‚

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å°†æ•°ç»„è¿›è¡Œæ¢å¤å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œä¸€æ¬¡éå†ï¼Œå¯¹äºéå†åˆ°çš„æ•° ![x=\textit{nums}\[i\] ](./p__x_=_textit{nums}_i__.png) ï¼Œå¦‚æœ ![x\in\[1,N\] ](./p__x_in__1,_N__.png) ï¼Œæˆ‘ä»¬å°±çŸ¥é“ *x* åº”å½“å‡ºç°åœ¨æ•°ç»„ä¸­çš„ *x - 1* çš„ä½ç½®ï¼Œå› æ­¤äº¤æ¢ ![\textit{nums}\[i\] ](./p__textit{nums}_i__.png)  å’Œ ![\textit{nums}\[x-1\] ](./p__textit{nums}_x_-_1__.png) ï¼Œè¿™æ · *x* å°±å‡ºç°åœ¨äº†æ­£ç¡®çš„ä½ç½®ã€‚åœ¨å®Œæˆäº¤æ¢åï¼Œæ–°çš„ ![\textit{nums}\[i\] ](./p__textit{nums}_i__.png)  å¯èƒ½è¿˜åœ¨ *[1, N]* çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­è¿›è¡Œäº¤æ¢æ“ä½œï¼Œç›´åˆ° ![x\notin\[1,N\] ](./p__x_notin__1,_N__.png) ã€‚

æ³¨æ„åˆ°ä¸Šé¢çš„æ–¹æ³•å¯èƒ½ä¼šé™·å…¥æ­»å¾ªç¯ã€‚å¦‚æœ ![\textit{nums}\[i\] ](./p__textit{nums}_i__.png)  æ°å¥½ä¸ ![\textit{nums}\[x-1\] ](./p__textit{nums}_x_-_1__.png)  ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ä¼šæ— é™äº¤æ¢ä¸‹å»ã€‚æ­¤æ—¶æˆ‘ä»¬æœ‰ ![\textit{nums}\[i\]=x=\textit{nums}\[x-1\] ](./p__textit{nums}_i__=_x_=_textit{nums}_x_-_1__.png) ï¼Œè¯´æ˜ *x* å·²ç»å‡ºç°åœ¨äº†æ­£ç¡®çš„ä½ç½®ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è·³å‡ºå¾ªç¯ï¼Œå¼€å§‹éå†ä¸‹ä¸€ä¸ªæ•°ã€‚

ç”±äºæ¯æ¬¡çš„äº¤æ¢æ“ä½œéƒ½ä¼šä½¿å¾—æŸä¸€ä¸ªæ•°äº¤æ¢åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œå› æ­¤äº¤æ¢çš„æ¬¡æ•°æœ€å¤šä¸º *N*ï¼Œæ•´ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º *O(N)*ã€‚

```C++ [sol2-C++]
class Solution {
public:
    int firstMissingPositive(vector<int>& nums) {
        int n = nums.size();
        for (int i = 0; i < n; ++i) {
            while (nums[i] > 0 && nums[i] <= n && nums[nums[i] - 1] != nums[i]) {
                swap(nums[nums[i] - 1], nums[i]);
            }
        }
        for (int i = 0; i < n; ++i) {
            if (nums[i] != i + 1) {
                return i + 1;
            }
        }
        return n + 1;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int firstMissingPositive(int[] nums) {
        int n = nums.length;
        for (int i = 0; i < n; ++i) {
            while (nums[i] > 0 && nums[i] <= n && nums[nums[i] - 1] != nums[i]) {
                int temp = nums[nums[i] - 1];
                nums[nums[i] - 1] = nums[i];
                nums[i] = temp;
            }
        }
        for (int i = 0; i < n; ++i) {
            if (nums[i] != i + 1) {
                return i + 1;
            }
        }
        return n + 1;
    }
}
```

```Python [sol2-Python3]
class Solution:
    def firstMissingPositive(self, nums: List[int]) -> int:
        n = len(nums)
        for i in range(n):
            while 1 <= nums[i] <= n and nums[nums[i] - 1] != nums[i]:
                nums[nums[i] - 1], nums[i] = nums[i], nums[nums[i] - 1]
        for i in range(n):
            if nums[i] != i + 1:
                return i + 1
        return n + 1
```

```C [sol2-C]
int firstMissingPositive(int* nums, int numsSize) {
    for (int i = 0; i < numsSize; ++i) {
        while (nums[i] > 0 && nums[i] <= numsSize &&
               nums[nums[i] - 1] != nums[i]) {
            int t = nums[nums[i] - 1];
            nums[nums[i] - 1] = nums[i], nums[i] = t;
        }
    }
    for (int i = 0; i < numsSize; ++i) {
        if (nums[i] != i + 1) {
            return i + 1;
        }
    }
    return numsSize + 1;
}
```

```golang [sol2-Golang]
func firstMissingPositive(nums []int) int {
    n := len(nums)
    for i := 0; i < n; i++ {
        for nums[i] > 0 && nums[i] <= n && nums[nums[i]-1] != nums[i] {
            nums[nums[i]-1], nums[i] = nums[i], nums[nums[i]-1]
        }
    }
    for i := 0; i < n; i++ {
        if nums[i] != i + 1 {
            return i + 1
        }
    }
    return n + 1
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š*O(N)*ï¼Œå…¶ä¸­ *N* æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š*O(1)*ã€‚